<!-- index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>생산계획 관리 시스템 (MES)</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <!-- 헤더 -->
        <header class="header">
            <h1>🏭 생산계획 관리 시스템</h1>
            <div class="connection-status">
                <div class="status-item">
                    <span class="status-dot" id="supabaseStatus"></span>
                    <span>Supabase</span>
                </div>
                <div class="status-item">
                    <span class="status-dot" id="saveStatus"></span>
                    <span id="saveStatusText">대기중</span>
                </div>
            </div>
        </header>

        <!-- 생산계획 등록 폼 -->
        <section class="form-section">
            <div class="card">
                <div class="card__header">
                    <h2>📝 새 생산계획 등록</h2>
                </div>
                <div class="card__body">
                    <form id="productionForm" class="production-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label" for="customer">고객사</label>
                                <input type="text" id="customer" class="form-control" required 
                                       placeholder="고객사명을 입력하세요">
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="manufactureNumber">제조번호</label>
                                <input type="text" id="manufactureNumber" class="form-control" required 
                                       placeholder="제조번호를 입력하세요">
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="productName">제품명</label>
                                <input type="text" id="productName" class="form-control" required 
                                       placeholder="제품명을 입력하세요">
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="orderQuantity">수주량 (EA)</label>
                                <input type="text" id="orderQuantity" class="form-control" required 
                                       placeholder="수주량을 입력하세요">
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="processLine">공정라인</label>
                                <select id="processLine" class="form-control" required>
                                    <option value="">공정라인을 선택하세요</option>
                                    <option value="PTP1">PTP1</option>
                                    <option value="PTP2">PTP2</option>
                                    <option value="분말스틱1">분말스틱1</option>
                                    <option value="분말스틱2">분말스틱2</option>
                                    <option value="분말스틱3">분말스틱3</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="startDate">시작일</label>
                                <input type="date" id="startDate" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="endDate">완료일</label>
                                <input type="date" id="endDate" class="form-control" required>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn--primary">
                                <span class="btn__icon">➕</span>
                                계획 등록
                            </button>
                            <button type="button" id="saveButton" class="btn btn--secondary">
                                <span class="btn__icon">💾</span>
                                수동 저장
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- 달력 형태 간트차트 -->
        <section class="calendar-section">
            <div class="card">
                <div class="card__header">
                    <h2>📅 생산 달력</h2>
                    <div class="calendar-nav">
                        <button id="prevMonth" class="btn btn--icon">◀</button>
                        <span id="currentMonthDisplay"></span>
                        <button id="nextMonth" class="btn btn--icon">▶</button>
                    </div>
                </div>
                <div class="card__body">
                    <div id="productionCalendar" class="production-calendar"></div>
                </div>
            </div>
        </section>

        <!-- 생산계획 목록 -->
        <section class="table-section">
            <div class="card">
                <div class="card__header">
                    <h2>📋 생산계획 목록</h2>
                </div>
                <div class="card__body">
                    <div class="table-responsive">
                        <table class="production-table">
                            <thead>
                                <tr>
                                    <th>고객사</th>
                                    <th>제조번호</th>
                                    <th>제품명</th>
                                    <th>수주량</th>
                                    <th>공정라인</th>
                                    <th>시작일</th>
                                    <th>완료일</th>
                                    <th>작업</th>
                                </tr>
                            </thead>
                            <tbody id="productionTableBody">
                                <!-- 동적으로 생성됨 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- 삭제 확인 모달 -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>⚠️ 삭제 확인</h3>
            </div>
            <div class="modal-body">
                <p>선택한 생산계획을 삭제하시겠습니까?</p>
                <p class="text-small">이 작업은 되돌릴 수 없습니다.</p>
            </div>
            <div class="modal-footer">
                <button id="confirmDelete" class="btn btn--danger">삭제</button>
                <button id="cancelDelete" class="btn btn--secondary">취소</button>
            </div>
        </div>
    </div>

    <!-- 수정 모달 -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>✏️ 생산계획 수정</h3>
            </div>
            <div class="modal-body">
                <!-- 수정용 폼 -->
                <form id="editForm" class="production-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label" for="editCustomer">고객사</label>
                            <input type="text" id="editCustomer" class="form-control" required 
                                   placeholder="고객사명을 입력하세요">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="editManufactureNumber">제조번호</label>
                            <input type="text" id="editManufactureNumber" class="form-control" required 
                                   placeholder="제조번호를 입력하세요">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="editProductName">제품명</label>
                            <input type="text" id="editProductName" class="form-control" required 
                                   placeholder="제품명을 입력하세요">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="editOrderQuantity">수주량 (EA)</label>
                            <input type="text" id="editOrderQuantity" class="form-control" required 
                                   placeholder="수주량을 입력하세요">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="editProcessLine">공정라인</label>
                            <select id="editProcessLine" class="form-control" required>
                                <option value="">공정라인을 선택하세요</option>
                                <option value="PTP1">PTP1</option>
                                <option value="PTP2">PTP2</option>
                                <option value="분말스틱1">분말스틱1</option>
                                <option value="분말스틱2">분말스틱2</option>
                                <option value="분말스틱3">분말스틱3</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="editStartDate">시작일</label>
                            <input type="date" id="editStartDate" class="form-control" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="editEndDate">완료일</label>
                            <input type="date" id="editEndDate" class="form-control" required>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="confirmEdit" class="btn btn--primary">수정 저장</button>
                <button id="cancelEdit" class="btn btn--secondary">취소</button>
            </div>
        </div>
    </div>

    <!-- 툴팁 -->
    <div id="tooltip" class="tooltip"></div>

    <!-- 토스트 알림 -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="app.js"></script>
</body>
</html>
